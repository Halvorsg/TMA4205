M = 10;
e = ones(M,1);
A = spdiags([e,2*e,e],-1:1,M,M)
x = 1:2:M;
y = 2:2:M;
A = A([x,y],[x,y]);
full(A)




M = 6;N = 4;
e = ones(M*N,1);
diagonal1 = -4*e;
diagonal2 = -4*e;
A = spdiags([e,e,diagonal1,e,e],[-M,-1,0,1,M],M*N,M*N);
indices1 = [M+1:M:M*N]; indices2 = [M:M:M*N-1];
A(indices1,indices2) = 0; A(indices2,indices1) = 0;
if mod(M,2) == 1
    black = 1:2:M*N;
    red = 2:2:M*N;
    spy(A([black,red],[black,red]))
else
X = reshape(1:M*N,M,N)';
tic %Fastest
red1 = zeros(ceil(M*N/2),1);
redCNT = 0;
for i = 1:2:M
    red1(redCNT+1:redCNT + length(X(2:2:end,i))) = X(2:2:end,i);
    redCNT = redCNT + length(X(2:2:end,i));
end
for i = 2:2:M
    red1(redCNT+1:redCNT + length(X(1:2:end,i))) = X(1:2:end,i);
    redCNT = redCNT + length(X(1:2:end,i));
end
toc 
red1 = sort(red1);
black1 = ([1:2:N*M]+[2:2:M*N])'-red1;

spy(A([black1,red1],[black1,red1]))

end 

x = ones(length(A),1);
D1 = A(black,black); D1 = A(red,red);
E = A(black,red) ; F = A(red,black);
cnt = 1;
maxiter = 100;
while r > 0.1 && cnt < maxiter
    




    
    
    